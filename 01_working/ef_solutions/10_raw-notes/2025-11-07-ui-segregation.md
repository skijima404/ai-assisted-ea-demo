---
date: 2025-11-07
tags: [raw]
---

# Raw Note

## 気づき (Observation)  
- UIとビジネスロジックの結合度が高いので、下手に分離するとビジネスロジックが崩れたりUIが成立しなくなる。
  - CRUDを実装しようとすると、どうしても "C" 以外で何らかビジネスロジックに手を入れることになる
- 本格的なAPIの公開ではなく、一時的なAPIを移行の目的に特化して作成する方法はどうか
  - CamelでDBから直接Read Only APIを作成する
    - メニューなどの更新頻度の低いコンテンツは、DBですらなくても良い (CSV等)
  - スクレイピング
    - こっちは認可で苦労しそう。食事の支払い履歴はそれなりにセンシティブなので、スクレイピングと旧画面の間で認可を実装する必要がある。
      - ブラウザ --(Token)--> 新画面 --(Token)--> スクレイピングサービス --(Token)--> 旧画面
        - 旧システムをToken対応する必要あり
      - ブラウザ --(Token)--> 新画面 --(Token)--> スクレイピングサービス --(Admin Access)--> 旧画面
        - スクレイピングと旧画面のどちらかで、誰からのアクセスかに応じてアクセスコントロールを実装する必要あり
          - 可能かどうかがわからない。
- 比較: Camelに一票
  - Camelのほうが難易度は低そう
  - パフォーマンスも経由地が少ない分Camelの方が良さそう
- どちらにしてもこの段階の仮APIは、今後の本格的な公開APIの綺麗なインターフェースで公開する
  - 綺麗にしないとアプリケーションと連携後にAPIバージョンアップが必要になるが、分離する以上ソフトウェアライフサイクルが別になるので、バージョンアップについてきてくれるかに不安が残る。
  - であればAPIインターフェースは本格的な公開できる程度に綺麗なものにしておき、トラフィック切り替えのみで対応できるようにしておく

## 疑問 (Question)
- 特になし

## 次アクション (Next Step)
- 特になし