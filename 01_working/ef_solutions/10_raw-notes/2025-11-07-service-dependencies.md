---
date: 2025-11-07
tags: [raw]
---

# Raw Note

## 気づき (Observation)  
社食システムに内包されている機能群の切り出し難易度
- ユーザープロファイル (users)
  - 切り出すだけならそれほど難易度は高くない
    - データ入力は限定的。
      - 入社の際に人事システムの登録ユーザーから情報を取得してデータ更新している。現在バッチ。
      - 異動時の更新不要
      - 退職はないが今後はアカウント無効化 --> 削除
      - 一部ユーザー情報の画面入力はあるが、月に数回あるかないか
    - 画面で表示する際に参照されている
      - ユーザー表示名やメールアドレス
      - アクセスコントロール
- メニュー (menu)
  - 切り出すだけなら難易度はそれほど高くない
    - 入力は社食の栄養士さんが実施、1週間に一度などまとめて
      - Writeが移行難易度を上げるなら、一時的にWriteを止め、Excel等で受け取ったデータをこちらがSQLで処理することで対応可能
  - 画面からの呼び出しでよく呼ばれる
- 決済履歴 (payments)
  - 切り出し難易度それなりに
    - 入力は多いが決済端末からのみ
      - 入力のみ、Value Objectなので更新されない
    - 多機能からの参照あり
      - 内部の利用明細、請求台帳 (現在はプロシージャ)
        - Target Architectureではこの2つは人事システム側に移動、イベント連携の予定
- 利用明細 (transactions)
  - 難易度中
    - 決済履歴 (payments) との間の検算
      - ここは社食システムのみの明細
    - Target Architectureでは利用履歴との間の検算
      - 社食システムとコンビニシステムの決済履歴の合算
    - ロジックもだいぶ変わる
      - ロジックそのものはおそらくそれほど複雑ではない
- 請求台帳 (bills)
  - 現在はインプットがCSVに限定されているので、切り出すことはそれほど難しくない
  - Target Architectureでは利用明細との依存度高め
    - 検算のデータソースが利用明細に切り替わる

キモは利用明細と依存関係のあるものの順序整理。
逆にメニューは移行しやすそうなので、どのタイミングにもできそう。
最初に切り出してコントラクトテストの習熟素材にしても良いかも。


## 疑問 (Question)
- 特になし

## 次アクション (Next Step)
- 利用明細の詳細シミュレーション