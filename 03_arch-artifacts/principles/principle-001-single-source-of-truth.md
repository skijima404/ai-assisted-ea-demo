---
id: principle-001
title: Single Source of Truth（単一の真実の源）
tags: [principle, project]
status: approved
approver: Architecture Board
approved_on: 2025-11-06
---

# Single Source of Truth（単一の真実の源）

## Statement
取引データは単一の信頼できる情報源から取得し、すべてのシステムが同じ情報を共有する。データの整合性を保証するため、複数の経路で生成された情報の不整合を防ぐ。

## Rationale
現状、金額不整合問題が発生している。表示ロジックと精算ロジックが異なるデータソースを参照しており、割引情報の不整合が発生している。

また、社食・人事・コンビニの各担当部門が共通データ基盤に基づいて意思決定を行うことで、組織的な整合性も確保できる。

単一の信頼できる情報源を確立することで、社食・コンビニ・人事が同じ情報を共有でき、金額不整合を根本的に解決できる。また、データの整合性を保証する仕組みにより、異なる経路で生成された情報の不整合を検出・防止できる。

## Implications
- すべての利用者に対して、常に同一の取引金額が表示される
- 精算・表示・連携の各処理が同一のデータソースを参照する
- 決済イベントは単一のイベントソースから発行され、全システムが同一イベントを購読する
- データモデルは統一され、割引や消費税などの属性を明示的に保持する
- データ整合性を検証する仕組みを導入する
- イベントソーシングパターンなどの適用も検討する

## Related Principles
- principle-003 (イベント駆動アーキテクチャ)

## Linked Vision
アーキテクチャビジョン 1. 信頼される決済・精算基盤の構築 - 単一の信頼できる情報源

