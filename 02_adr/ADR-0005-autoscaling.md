# ADR-0005: Autoscaling (オートスケーリング)

## Status
Accepted

## Context

### 問題の背景

現状の固定リソース構成では、負荷が特定時間帯やイベント日に集中するにもかかわらず、24時間同一のリソースを維持しているため、リソース効率が低くコストが無駄になっている。また、ピーク時の増強対応が非ピーク時には過剰となり、運用効率も悪い。この状況を改善し、ビジネス需要に柔軟に対応する必要がある。

## Decision

**Autoscaling (オートスケーリング) を戦略的に採用する**

リソース利用をビジネス需要に合わせて動的に調整する仕組みとして、負荷に応じた自動スケールアップ/ダウンを導入する。これは単なる最適化ではなく、マイクロサービスの独立性を活かし、サービス単位でリソースを柔軟に調整することで、システム全体の効率と安定性を高める戦略的な転換である。

### 実装への影響（Implications）
- マイクロサービス単位でスケールポリシーを設計し、サービスごとの負荷特性に合わせて最適化する
- コンテナオーケストレーションプラットフォーム（例: OpenShift）を活用し、CPU、メモリ、リクエストレイテンシ、キュー長など複数のメトリクスに基づく自動スケーリングを実装する
- イベント日の需要予測やスケジュールに基づく事前スケールを組み込み、ピーク対応の遅延リスクを低減する
- 非ピーク時のスケールダウンによりコスト削減を図る一方、最小Pod数設定で安定性を確保する
- スケーリング動作の観測性を高め、運用監視と継続的な改善を推進する

### 関連する原則
- ADR-0004: Microservices Architecture（サービス単位でのスケーリング）

## Consequences

### Positive
- リソース利用効率とコスト効果が向上し、ビジネス需要に即応可能となる
- システムの安定性と柔軟性が強化される
- イベントやピーク時の負荷変動に対して自動かつ迅速に対応できる

### Negative
- オートスケーリング設定・調整のための運用コストが発生する
- 瞬間的な負荷スパイクに対する対応遅延のリスクが残る
- メトリクス収集・監視基盤の整備が必須となる

### Mitigation
- 需要予測とスケジュールベースの事前スケールを活用し、ピーク対応を強化する
- 最小Pod数を適切に設定し、突発的な負荷増加に備える
- 観測性の確保と運用監視を通じてスケーリング動作を継続的に改善する

## Reference
- Architecture Vision: `03_arch-artifacts/arch-vision.md`
- Analysis: `01_working/bd_arch-design/20_analysis/an-006-no-design-for-peak-hour-load.md`
- Principle: `03_arch-artifacts/principles/principle-005-autoscaling.md`

